<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Students</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.3.5/css/dataTables.dataTables.css">
    <script src="https://cdn.datatables.net/2.3.5/js/dataTables.js"></script>
</head>

<body class="bg-neutral-900 text-white">

<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="max-w-7xl mx-auto py-16 px-4">

    <div class="text-sm text-neutral-400 mb-6">
        <a href="/dashboard" class="hover:text-[#aa955e]">Dashboard</a>
        <span class="mx-1">â€º</span>
        <span class="font-semibold text-white">Students</span>
    </div>

    <h1 class="text-4xl font-bold mb-8">Students</h1>

    <div class="bg-neutral-800 rounded-xl p-6 shadow-lg border border-neutral-700 overflow-x-auto">

        <table id="studentsTable" class="display w-full text-sm border border-neutral-700 rounded-md">
            <thead class="bg-neutral-700 border-b border-neutral-600">
            <tr>
                <th class="px-4 py-2 text-left no-sort">Photo</th>
                <th class="px-4 py-2 text-left">Name</th>
                <th class="px-4 py-2 text-left">Email</th>
                <th class="px-4 py-2 text-left">Phone</th>
                <th class="px-4 py-2 text-left">DOB</th>
                <th class="px-4 py-2 text-left no-sort">Actions</th>
            </tr>
            </thead>

            <tbody class="divide-y divide-neutral-700">

            <tr th:each="s : ${students}">

                <td class="px-4 py-3">
                    <img th:if="${s.profileImageUrl != ''}"
                         th:src="${s.profileImageUrl}"
                         class="w-10 h-10 rounded object-cover"/>

                    <div th:if="${s.profileImageUrl == ''}"
                         class="w-10 h-10 bg-neutral-600 rounded flex items-center justify-center text-neutral-300 text-xs">
                        N/A
                    </div>
                </td>

                <td class="px-4 py-3"
                    th:text="${s.firstName + ' ' + s.lastName}"></td>

                <td class="px-4 py-3" th:text="${s.email}"></td>

                <td class="px-4 py-3"
                    th:text="${s.phoneNumber == '' ? 'Not filled' : s.phoneNumber}"></td>

                <td class="px-4 py-3"
                    th:text="${s.dateOfBirth == '' ? 'Not filled' : s.dateOfBirth}"></td>

                <td class="px-4 py-3">

                    <a th:href="@{'/students/applications/' + ${s.email}}"
                       class="text-yellow-400 hover:text-yellow-300 text-xl mr-4">
                        <i class="fa-solid fa-folder-open"></i>
                    </a>

                    <a th:if="${s.cvFileUrl != ''}"
                       th:href="${s.cvFileUrl}"
                       target="_blank"
                       class="text-blue-400 hover:text-blue-300 text-xl">
                        <i class="fa-solid fa-file"></i>
                    </a>

                </td>

            </tr>

            </tbody>
        </table>

    </div>
</div>

<div th:replace="~{fragments/snackbar :: snackbar}"></div>
<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    new DataTable("#studentsTable", {
        columnDefs: [
            { orderable: false, targets: "no-sort" }
        ],
        layout: {
            topStart: { search: { placeholder: "Search students..." }},
            topEnd: { pageLength: { menu: [5, 10, 25, 50] }},
            bottomEnd: { paging: { buttons: 3 }}
        },
        language: {
            lengthMenu: "Show _MENU_ students per page",
            info: "Showing _START_ to _END_ of _TOTAL_ students",
            infoEmpty: "No students found",
            infoFiltered: "(filtered from _MAX_ total)",
            zeroRecords: "No matching student",
            paginate: { previous: "Prev", next: "Next" }
        }
    });
</script>

</body>
</html>